{"version":3,"sources":["constants.js","utils.js"],"names":["MUTE","UNMUTE","MUTED","UNMUTED","MEET_MESSAGE_WHEN_MUTE_IS_ON","MEET_MESSAGE_WHEN_MUTE_IS_OFF","ongoingMeetRegex","isLiveGoogleMeetTab","tab","url","match","switchToMeetTab","getMeetTab","console","log","chrome","tabs","update","id","selected","active","windows","windowId","drawAttention","focused","setMeetMuteState","muteState","meetTab","sendMessage","changeFavicon","microphoneCurrentState","document","querySelector","href","setMuteState","muted","isCurrentlyMuted","mutedInfo","Promise","resolve","reject","query","forEach","index","err","updateContextMenuTitle","contextMenuId","newTitle","contextMenus","title","createBasicNotificationWithoutId","iconUrl","message","callback","notifications","create","type"],"mappings":"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","file":"utils.js","sourceRoot":"../../src","sourcesContent":["export const MUTE = \"mute\";\nexport const UNMUTE = \"unmute\";\nexport const MUTED = \"muted\";\nexport const UNMUTED = \"unmuted\";\nexport const MEET_MESSAGE_WHEN_MUTE_IS_ON = \"Turn on microphone\";\nexport const MEET_MESSAGE_WHEN_MUTE_IS_OFF = \"Turn off microphone\";","import { MUTE, UNMUTE } from \"./constants\";\n\nconst ongoingMeetRegex = /meet.google.com\\/[a-zA-Z]{3}\\-[a-zA-Z]{4}\\-[a-zA-Z]{3}.*/gm;\n\nconst isLiveGoogleMeetTab = (tab) => {\n    return tab.url.match(ongoingMeetRegex);\n};\n\nconst switchToMeetTab = async () => {\n    try {\n        let tab = await getMeetTab();\n        console.log(\"Got meet tab:\", tab);\n        if (tab != null) {\n            console.log(\"Updating tab to meet:\", tab);\n            chrome.tabs.update(tab.id, { selected: true, active: true });\n            chrome.windows.update(tab.windowId, { drawAttention: true, focused: true });\n        }\n    } catch (err) {\n        console.log(\"Error while getting meet tab\");\n    }\n};\n\nconst setMeetMuteState = async (muteState) => {\n    let meetTab = await getMeetTab();\n    // setMuteState(meetTab, muteState);\n    console.log(\"Sending message to tab:\", meetTab, \"with muteState:\", muteState);\n    chrome.tabs.sendMessage(meetTab.id, { muteState });\n};\n\nconst changeFavicon = (microphoneCurrentState) => {\n    document.querySelector('link[rel*=\"icon\"]').href = \"icon/\" + microphoneCurrentState + \".png\";\n};\n\nconst setMuteState = async (tab, muteState) => {\n    console.log(\"Requested mute state:\", muteState);\n    if (muteState === MUTE) {\n        await chrome.tabs.update(tab.id, { muted: true });\n    }\n    else if (muteState === UNMUTE) {\n        await chrome.tabs.update(tab.id, { muted: false });\n    }\n};\n\nconst isCurrentlyMuted = (tab) => {\n    return tab.mutedInfo.muted;\n};\n\nconst getMeetTab = () => {\n    return new Promise((resolve, reject) => {\n        try {\n            chrome.tabs.query({}, (tabs) => {\n                tabs.forEach((tab, index) => {\n                    if (isLiveGoogleMeetTab(tab)) {\n                        console.log(\"Found live Google Meet tab:\", tab);\n                        return resolve(tab);\n                    }\n                });\n            });\n        } catch (err) {\n            reject(err);\n        }\n    })\n};\n\nconst updateContextMenuTitle = (contextMenuId, newTitle) => {\n    chrome.contextMenus.update(contextMenuId, {\n        title: newTitle\n    });\n};\n\n\nconst createBasicNotificationWithoutId = (iconUrl, title, message, callback) => {\n    chrome.notifications.create({\n        type: \"basic\",\n        iconUrl: iconUrl,\n        title: title,\n        message: message,\n    },\n        callback\n    );\n};\n\nexport { isLiveGoogleMeetTab, switchToMeetTab, changeFavicon, setMeetMuteState, updateContextMenuTitle, isCurrentlyMuted, createBasicNotificationWithoutId };"]}